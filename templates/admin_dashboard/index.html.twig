{% extends 'base.html.twig' %}

{% block title %}Hello AdminDashboardController!{% endblock %}

{% block body %}
<div class="maincontent-area">
    <div class="zigzag-bottom"></div>
    <div class="container">

        <div class="example-wrapper">
            <!-- accueil de l'admin -->
            <h1>Bonjour {{ app.user.pseudo }}! âœ…</h1>

            <!-- affiche un message de adminDashBoardController et index de adminDashBoard -->
            This friendly message is coming from:
            <ul>
                <li>Your controller at <code><a href="{{ 'C:/Users/Utilisateur/Desktop/projet dynamique/dynamique/dynamique/src/Controller/AdminDashboardController.php'|file_link(0) }}">src/Controller/AdminDashboardController.php</a></code></li>
                <li>Your template at <code><a href="{{ 'C:/Users/Utilisateur/Desktop/projet dynamique/dynamique/dynamique/templates/admin_dashboard/index.html.twig'|file_link(0) }}">templates/admin_dashboard/index.html.twig</a></code></li>
            </ul>

            <!-- tableau de gestion des utilisateurs, suppression de ces derniers possible, sauf admin -->
            <h2>Utilisateurs</h2>

            <table>

                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Nom</th>
                        <th>Mail</th>
                        <th>Role</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                {% for userList in users %}
                    <tr>
                        <td>{{ userList.id }}</td>
                        <td>{{ userList.pseudo }}</td>
                        <td>{{ userList.email }}</td>
                        <td>{{ userList.roles[0] }}</td>
                        <td>
                            <form method="post" action="{{ path('deleteTargetUser', {id: userList.id}) }}">
                                <button type="submit" name="deleteTargetUser" id="deleteTargetUser" value="deleteTargetUser">Supprimer le compte</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>

            </table>

        </div>

    </div>
</div>
{% endblock %}
